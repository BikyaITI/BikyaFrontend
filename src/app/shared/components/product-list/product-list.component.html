
    <div class="product-card">
      <div class="product-image">
        <img
          [src]="getMainImage(product()!)"
          (error)="onImageError($event)"
          class="img-fluid"
          [alt]="product()!.title"
        />
        <!-- badges -->
        <div class="product-badge top-0 start-0 m-2">
          <span
            class="badge"
            [class]="getConditionBadgeClass(product()!.condition)"
          >
            {{ product()!.condition }}
          </span>
        </div>
        <div class="product-badge top-0 end-0 m-2">
          <span *ngIf="product()!.isForExchange" class="badge bg-success">
            <i class="bi bi-arrow-left-right"></i> Exchange</span
          >
        </div>
        <div class="product-overlay">
          <button
            class="btn btn-primary btn-sm"
            [routerLink]="['/products', product()!.id]"
          >
            Quick View
          </button>
          <button
            class="btn btn-outline-primary btn-sm"
            (click)="ToggleWishlist(product()!)"
            [class.active]="product()!.isInWishlist"
            [disabled]="!currentUser"
            title="add to wishlist"
          >
            <i class="fas fa-heart"></i>
          </button>
        </div>
      </div>
      <div class="product-info">
        <div class="d-flex justify-content-between mb-1">
          <span class="text-muted small">
            <i class="fas fa-user"></i> 
         <a [routerLink]="isMyProduct() ? '/profile' : ['/users', product()!.userId]">  {{ product()!.userName }}</a>
            
          </span>
          <span class="text-muted small me-2">
            <i class="fas fa-tag"></i> 
          <a [routerLink]="['/category', product()!.categoryId]">  {{ product()!.categoryName }}</a>
          </span>
        </div>
        <h4 class="product-title mb-0 flex-grow-1">{{ product()!.title }}</h4>

        <div class="d-flex justify-content-between align-items-center mb-1">
          <div class="product-price">
            <span class="h5 text-primary mb-0">{{ product()!.price }} EGP</span>
          </div>
          <small class="text-muted">
            <i class="bi bi-calendar3"></i>
            {{ product()!.createdAt | date : "mediumDate" }}
          </small>
        </div>

        <!-- user action -->
           <!-- [routerLink]="['/checkout']" [queryParams]="{ productId: product()!.id }" -->
        <button
          *ngIf="role() === 'user'"
          class="btn btn-primary btn-sm w-100 mt-2"
          (click)="buyNow(product()!)"
          [disabled]="!currentUser"
         
        >
          <i class="bi bi-cart-plus"></i> Buy Now
        </button>

        <!-- owner actions -->

        <div
          class="btn-group w-100"
          role="group"
            *ngIf="role() === 'own-product'"
        >
          <a
            [routerLink]="['/products', product()!.id]"
            class="btn btn-outline-info btn-sm"
          >
            <i class="bi bi-eye"></i> View
          </a>
          <button
            class="btn btn-outline-warning btn-sm"
        (click)="OnEdit(product()!.id)"
          >
            <i class="bi bi-pencil"></i> Edit
          </button>
          <button
            class="btn btn-outline-danger btn-sm"
             (click)="onDelete(product()!.id)"
          >
            <i class="bi bi-trash"></i> Delete
          </button>
        </div>
       
      

</div>