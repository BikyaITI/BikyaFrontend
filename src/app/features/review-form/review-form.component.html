<div *ngIf="!reviewSubmitted" class="card shadow-sm p-4 rounded-4 border-0 ">
  <h4 class="mb-4 text-muted">
    Leave a Review
  </h4>

  <form [formGroup]="reviewForm" (ngSubmit)="submitReview()">

    <!-- hidden fields -->
  

  <p class="text-muted mb-4">
    You recently completed an order for 
    <span class="fw-bold text-primary">{{ order.productTitle }}</span> 
    from 
    <span class="fw-bold text-success">
      {{ order.sellerName }}
    </span>.  
    Share your experience to help others!
  </p>

  <!-- Optional: Visual separation -->
  <div class="d-flex align-items-center gap-4 mb-3">
    
    <!-- Product -->
    <div class="p-3 bg-light rounded-4 flex-fill text-center border">
      <div class="small text-muted mb-1"> <i class="fas fa-shopping-bag"></i> Product</div>
      <div class="fw-bold fs-6">{{ order.productTitle }}</div>
    </div>

    <!-- Seller -->
    <div class="p-3 bg-light rounded-4 flex-fill text-center border">
      <div class="small text-muted mb-1"><i class="fas fa-user me-1"></i> Seller</div>
      <div class="fw-bold fs-6 text-success">
       {{ order.sellerName }}
      </div>
    </div>
  </div>
    <!-- ‚≠ê Rating -->
    <div class="mb-3">
      <label for="rating" class="form-label fw-semibold">‚≠ê Rating</label>
      <select class="form-select rounded-3 shadow-sm" id="rating" formControlName="rating">
        <option value="" disabled>Select rating</option>
        <option *ngFor="let r of [1,2,3,4,5]" [value]="r">{{ r }} Star{{ r > 1 ? 's' : '' }}</option>
      </select>
      <div *ngIf="reviewForm.get('rating')?.touched && reviewForm.get('rating')?.invalid" class="form-text text-danger">
        Please select a rating.
      </div>
    </div>

    <!-- üí¨ Comment -->
    <div class="mb-3">
      <label for="comment" class="form-label fw-semibold">üí¨ Comment</label>
      <textarea class="form-control rounded-3 shadow-sm" id="comment" rows="4" formControlName="comment"
        placeholder="Share your experience..."></textarea>
      <div *ngIf="reviewForm.get('comment')?.touched && reviewForm.get('comment')?.invalid"
        class="form-text text-danger">
        Comment is required and should not exceed 500 characters.
      </div>
    </div>

    <!-- Submit Button -->
    <div class="d-grid">
      <button type="submit" class="btn btn-dark btn-lg rounded-3" [disabled]="reviewForm.invalid || isSubmitting">
        <span *ngIf="!isSubmitting"> Submit Review</span>
        <span *ngIf="isSubmitting" class="spinner-border spinner-border-sm"></span>
      </button>
    </div>
  </form>
</div>

<div *ngIf="reviewSubmitted" class="alert alert-success p-4 rounded-4">
  Thank you for your review!
</div>
